import{r as c,j as e}from"./index-BEcDo9m9.js";import{k as q,l as G,e as H}from"./MessageContextMenu-Cnrkk1Eh.js";const J=({content:S,showAvatar:b=!0,avatarSrc:j,avatarBgColor:M="bg-gray-400",showUsername:T=!1,username:n,showTimestamp:g=!1,timestamp:r,className:w="",groupPosition:l,showReadStatus:N=!1,isRead:d=!1,disableTextCopy:C=!1,"aria-label":k,messageId:y,contextMenuItems:t,actions:o=[]})=>{const[A,x]=c.useState(!1),[$,p]=c.useState({x:0,y:0}),[i,h]=c.useState(null),[m,f]=c.useState(null),E=!l||l==="standalone"||l==="last",O=!l||l==="standalone"||l==="first",v=b&&E,X=T&&O,Y=v&&e.jsx("div",{className:`shrink-0 w-10 h-10 rounded-full ${M} flex items-center justify-center text-white font-semibold overflow-hidden`,"aria-hidden":"true",children:j?e.jsx("img",{src:j,alt:n||"Assistant",className:"w-full h-full object-cover"}):e.jsx("span",{children:(n||"AI").charAt(0).toUpperCase()})}),z=l==="first"||l==="middle"?"mb-1":"mb-4",D=s=>{t&&t.length>0&&(s.preventDefault(),p({x:s.clientX,y:s.clientY}),x(!0))},F=s=>{if(!t||t.length===0)return;const a=s.touches[0];f({x:a.clientX,y:a.clientY});const u=setTimeout(()=>{p({x:a.clientX,y:a.clientY}),x(!0)},500);h(u)},L=s=>{if(!m||!i)return;const a=s.touches[0],u=Math.abs(a.clientX-m.x),B=Math.abs(a.clientY-m.y);(u>10||B>10)&&(clearTimeout(i),h(null),f(null))},U=()=>{i&&(clearTimeout(i),h(null)),f(null)};return e.jsxs(e.Fragment,{children:[e.jsx("article",{className:`flex justify-start ${z} ${w}`,"aria-label":k||`Message from ${n||"assistant"}`,children:e.jsxs("div",{className:"flex flex-row items-start gap-2 max-w-[80%] md:max-w-[70%]",children:[v?Y:b&&e.jsx("div",{className:"shrink-0 w-10","aria-hidden":"true"}),e.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[X&&n&&e.jsx("div",{className:"text-xs text-gray-600 px-0","aria-label":"Sender name",children:n}),e.jsxs("div",{onContextMenu:D,onTouchStart:F,onTouchMove:L,onTouchEnd:U,className:"relative",children:[e.jsx("div",{className:["text-sm md:text-base leading-relaxed break-words text-gray-900",C?"select-none":""].join(" "),children:S}),(g||N)&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[g&&r&&e.jsx("time",{className:"text-xs text-gray-500",dateTime:r,"aria-label":`Sent at ${r}`,children:r}),N&&e.jsx("div",{className:"flex items-center","aria-label":d?"Read":"Sent",title:d?"Read":"Sent",children:d?e.jsx(q,{className:"text-gray-500",size:16}):e.jsx(G,{className:"text-gray-500",size:16})})]})]}),o&&o.length>0&&e.jsx("div",{className:"flex items-center gap-1 mt-1 flex-wrap",role:"toolbar","aria-label":"Message actions",children:o.map(s=>e.jsxs("button",{onClick:()=>s.onClick(y),disabled:s.disabled,className:`
                      flex items-center gap-1 px-2 py-1 rounded text-xs
                      text-gray-600 hover:bg-gray-100 
                      disabled:opacity-50 disabled:cursor-not-allowed
                      transition-colors duration-150
                      ${s.className||""}
                    `,"aria-label":s.label,title:s.label,children:[s.icon&&e.jsx("span",{className:"flex items-center",children:s.icon}),s.label&&e.jsx("span",{children:s.label})]},s.id))})]})]})}),t&&t.length>0&&e.jsx(H,{isOpen:A,position:$,items:t,onClose:()=>x(!1),messageId:y})]})};J.displayName="AssistantMessage";export{J as A};
