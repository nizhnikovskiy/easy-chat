import{j as u}from"./index-xl9o6DcG.js";function g(n){const t=[];let s=0;const r=[{regex:/\*\*(.+?)\*\*/g,type:"bold"},{regex:/__(.+?)__/g,type:"bold"},{regex:new RegExp("(?<!\\*)\\*(?!\\*)(.+?)(?<!\\*)\\*(?!\\*)","g"),type:"italic"},{regex:new RegExp("(?<!_)_(?!_)(.+?)(?<!_)_(?!_)","g"),type:"italic"},{regex:/`(.+?)`/g,type:"code"},{regex:/~~(.+?)~~/g,type:"strikethrough"},{regex:/\[(.+?)\]\((.+?)\)/g,type:"link"}],l=[];return r.forEach(({regex:e,type:c})=>{e.lastIndex=0;let i;for(;(i=e.exec(n))!==null;){const o=i.index,a=o+i[0].length;c==="link"?l.push({start:o,end:a,token:{type:c,content:i[1],url:i[2]}}):l.push({start:o,end:a,token:{type:c,content:i[1]}})}}),l.sort((e,c)=>e.start-c.start),l.forEach(e=>{if(s<e.start){const c=n.slice(s,e.start);c&&t.push({type:"text",content:c})}s<=e.start&&(t.push(e.token),s=e.end)}),s<n.length&&t.push({type:"text",content:n.slice(s)}),t}function p(n){return n.map((t,s)=>{const r=`token-${s}`;switch(t.type){case"bold":return u.jsx("strong",{className:"font-bold",children:t.content},r);case"italic":return u.jsx("em",{className:"italic",children:t.content},r);case"code":return u.jsx("code",{className:"px-1.5 py-0.5 mx-0.5 rounded bg-black/10 dark:bg-white/10 font-mono text-sm",children:t.content},r);case"strikethrough":return u.jsx("span",{className:"line-through",children:t.content},r);case"link":return u.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"underline hover:no-underline text-blue-600 dark:text-blue-400",children:t.content},r);case"text":default:return t.content}})}function x(n){if(!n)return[];const t=g(n);return p(t)}function d(n){return g(n).reduce((s,r)=>s+r.content.length,0)}function k(n,t){if(t<=0)return[];const s=g(n),r=[];let l=t;return s.forEach((e,c)=>{if(l<=0)return;const i=e.content.length;if(l>=i)r.push(...p([e]).map((o,a)=>typeof o=="object"&&o!==null&&"key"in o?{...o,key:`partial-${c}-${a}`}:o)),l-=i;else{const o={...e,content:e.content.slice(0,l)};r.push(...p([o]).map((a,h)=>typeof a=="object"&&a!==null&&"key"in a?{...a,key:`partial-${c}-${h}`}:a)),l=0}}),r}export{k as a,x as f,d as g};
